For purposes of this section, section 358(d), section 362(d), section 368(a)(1)(C), and section 368(a)(2)(B), except as provided in regulations (A) a recourse liability (or portion thereof) shall be treated as having been assumed if, as determined on the basis of all facts and circumstances, the transferee has agreed to, and is expected to, satisfy such liability (or portion), whether or not the transferor has been relieved of such liability; and (B) except to the extent provided in paragraph (2), a nonrecourse liability shall be treated as having been assumed by the transferee of any asset subject to such liability. The amount of the nonrecourse liability treated as described in paragraph (1)(B) shall be reduced by the lesser of (A) the amount of such liability which an owner of other assets not transferred to the transferee and also subject to such liability has agreed with the transferee to, and is expected to, satisfy, or (B) the fair market value of such other assets (determined without regard to section 7701(g)). Except as provided in regulations, if (A) gain is recognized to the transferor as a result of an assumption of a nonrecourse liability by a transferee which is also secured by assets not transferred to such transferee; and (B) no person is subject to tax under this title on such gain, then, for purposes of determining basis under subsections (a) and (b), the amount of gain recognized by the transferor as a result of the assumption of the liability shall be determined as if the liability assumed by the transferee equaled such transferee's ratable portion of such liability determined on the basis of the relative fair market values (determined without regard to section 7701(g)) of all of the assets subject to such liability. PROPERTY SUBJECT TO A LIABILITY TREATED IN SAME MANNER AS ASSUMPTION OF LIABILITY. (b) Clarification of Assumption of Liability. Section 357 of the Internal Revenue Code of 1986 is amended by adding at the end the following new subsection: (d) Determination of Amount of Liability Assumed. Section 362 of such Code is amended by adding at the end the following new subsection: (d) Limitation on Basis Increase Attributable to Assumption of Liability.